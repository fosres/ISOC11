#include <stdio.h>
#include <string.h>
#include <stdint.h>

errno_t memset_s(void *s,rsize_t smax, int c, rsize_t n)
{
	errno_t violation_present = 0;	

	volatile unsigned char * v = s;
	
	if ( s == NULL )
	{
		fprintf(stderr,"memset_s: Error: void * s == NULL!\n");

		return 1;
	}

	if ( n > RSIZE_MAX )
	{
		fprintf(stderr,"memset_s: Warning: rsize_t n > RSIZE_MAX!\n");	

		violation_present = 1;
	}

	if ( smax > RSIZE_MAX )
	{
		fprintf(stderr,"memset_s: Error: rsize_t smax > RSIZE_MAX!\n");

		return 1;
	}

	volatile unsigned char * v_p = &v[0];

	if ( violation_present == 1 ) // && (s != NULL) && (smax <= RSIZE_MAX) )
	{

#if 0
		void const * s_max = s + smax;

		while ( v_p < s_max )
		{
			*v_p++ = (unsigned char)c; 
		}	
#endif
		memset(s,(unsigned char)c,smax);	
		
		return violation_present;

	}
		
	
	else // no runtime-constraint violation found		
	{

#if 0		
		void const * v_n = s + n;

		while ( v_p < s_n )
		{
			*v_p++ = (unsigned char)c;
		}
#endif
		
		memset(s,(unsigned char)c,n);	

		return violation_present;

	}


}
